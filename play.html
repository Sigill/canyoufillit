<!DOCTYPE html>
<!--<html manifest="cache.manifest">-->
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<title>CanYouFillIt?</title>
	<style>
* { margin: 0; padding: 0;}

body, html { height:100%; }

#d {
	width: 100%;
	height: 100%;
}
	</style>
</head>
<body>
<div id="d">
</div>
<!-- https://github.com/darius/requestAnimationFrame -->
<script src="requestAnimationFrame.min.js"></script>
<script src="stats.min.js"></script>
<script src="observable.js"></script>
<script src="canyoufillit.js"></script>
<script src="canyoufillit_canvas_gui.js"></script>
<script>
var game = new CanYouFillItGame();
var gui = new CanYouFillItCanvasGui(game, 'd');

function isDebug() {
	var query = window.location.search.substring(1);
	var vars = query.split('&');
	for (var i = 0; i < vars.length; i++) {
		var pair = vars[i].split('=');
		if (pair[0] == 'debug') {
			return true;
		}
	}
	return false;
}

if(isDebug()) {
	var stats = new Stats();
	stats.setMode(0); // 0: fps, 1: ms
	stats.domElement.style.position = 'absolute';
	stats.domElement.style.left = '0px';
	stats.domElement.style.bottom = '0px';
	document.body.appendChild( stats.domElement );

	gui.addObserver(function(message) {
		if(message == 'beginStep')
			stats.begin();
		else if(message == 'endStep')
			stats.end();
	});
}

</script>
</body>
</html>
